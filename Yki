--[[
    UNIVERSAL SOURCE DUMPER - HƯỚNG DẪN SỬ DỤNG
]]

-- /// CẤU HÌNH QUAN TRỌNG NHẤT ///
-- Điền 1 từ khóa có trong tên script bạn muốn in
-- Ví dụ: Script tên "Banana Hub V2" -> Điền "Banana"
getgenv().TargetNameKeyword = "Teddy Hub" 

-- HÀM LƯU FILE
local function SaveSource(name, content)
    if not content or content == "" then return end
    
    -- Tự động đặt tên file
    local fileName = "DUMP_" .. name .. "_" .. math.random(1,1000) .. ".txt"
    
    -- Lưu vào thư mục Workspace của Executor
    writefile(fileName, content)
    
    -- Thông báo
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "ĐÃ LƯU THÀNH CÔNG!",
        Text = "Tên file: " .. fileName,
        Duration = 10
    })
    print("\n[SUCCESS] Đã lưu mã nguồn vào: " .. fileName)
end

-- QUÉT VÀ IN
if not decompile then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "LỖI EXECUTOR",
        Text = "Executor này không hỗ trợ lệnh 'decompile'!",
        Duration = 5
    })
else
    print("--- ĐANG QUÉT ---")
    local foundAny = false
    
    -- Quét CoreGui (Nơi script GUI thường nằm)
    for _, v in pairs(game:GetService("CoreGui"):GetDescendants()) do
        if (v:IsA("LocalScript") or v:IsA("ModuleScript")) and string.find(v.Name, getgenv().TargetNameKeyword) then
            foundAny = true
            print("--> Tìm thấy: " .. v:GetFullName())
            
            local success, code = pcall(function() return decompile(v) end)
            
            if success then
                SaveSource(v.Name, code)
            else
                print("--> Lỗi: Không thể dịch ngược (Code quá nặng hoặc bị khóa).")
            end
        end
    end
    
    if not foundAny then
        print("--> Không tìm thấy script nào có tên chứa: " .. getgenv().TargetNameKeyword)
    end
end
