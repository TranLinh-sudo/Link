--[[ 
    GUI CONTENTS DUMPER - VÉT SẠCH SCRIPT TRONG MENU
    Mục tiêu: PlayerGui/noguchihyuga
]]

local TargetGUI_Name = "noguchihyuga" -- Tên giao diện chúng ta đã tìm ra
local TargetGUI_Btn = "noguchi.hyuga Btn" -- Tên nút bật tắt

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "ĐANG ĐỘT NHẬP...",
    Text = "Đang lục soát bên trong giao diện...",
    Duration = 5
})

local function SaveAndCopy(name, content)
    local fileName = "DUMP_" .. name .. ".txt"
    writefile(fileName, content)
    setclipboard(content) -- Copy luôn cái cuối cùng
    return fileName
end

task.spawn(function()
    local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")
    local FoundCount = 0
    
    -- Hàm quét bên trong một GUI cụ thể
    local function ScanGUI(guiName)
        local target = PlayerGui:FindFirstChild(guiName)
        if target then
            print(">> Đã tìm thấy GUI: " .. guiName)
            
            -- Quét tất cả con cháu bên trong
            for _, v in pairs(target:GetDescendants()) do
                if v:IsA("LocalScript") or v:IsA("ModuleScript") then
                    print(">> Phát hiện Script: " .. v.Name)
                    
                    if decompile then
                        local s, code = pcall(function() return decompile(v) end)
                        if s and #code > 0 then
                            FoundCount = FoundCount + 1
                            local fname = SaveAndCopy(guiName .. "_" .. v.Name, code)
                            
                            game:GetService("StarterGui"):SetCore("SendNotification", {
                                Title = "BẮT ĐƯỢC 1 EM!",
                                Text = "Tên: " .. v.Name .. "\nĐã lưu file!",
                                Duration = 5
                            })
                        end
                    end
                end
            end
        end
    end

    -- Quét cả 2 mục tiêu
    ScanGUI(TargetGUI_Name)
    ScanGUI(TargetGUI_Btn)
    
    if FoundCount > 0 then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "HOÀN TẤT",
            Text = "Đã dump tổng cộng " .. FoundCount .. " script.\nKiểm tra Workspace ngay!",
            Duration = 10
        })
    else
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "RỖNG TUẾCH?",
            Text = "Không tìm thấy script nào bên trong GUI này.\nCó thể nó dùng Module bên ngoài.",
            Duration = 5
        })
    end
end)
