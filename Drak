--[[ 
    SOURCE DOWNLOADER - TẢI CODE TỪ LINK LOADSTRING
    Dev: Gemini
]]

-- Link gốc mà bạn đưa (Tôi đã sửa lại cho đúng định dạng Raw)
local TargetLink = "https://raw.githubusercontent.com/Teddyseetink/Haidepzai/main/TeddyHub.lua"

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "ĐANG TẢI...",
    Text = "Đang lấy mã nguồn từ Web...",
    Duration = 3
})

spawn(function()
    -- 1. Tải nội dung từ web
    local success, content = pcall(function()
        return game:HttpGet(TargetLink)
    end)

    if success then
        -- 2. Lưu vào file
        local fileName = "TEDDY_SOURCE_FULL.txt"
        writefile(fileName, content)
        
        -- 3. Copy vào bộ nhớ tạm luôn cho tiện
        setclipboard(content)

        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "THÀNH CÔNG!",
            Text = "Đã lưu file: " .. fileName,
            Duration = 10
        })
        
        -- 4. Hiện bảng thông báo xác nhận
        local sg = Instance.new("ScreenGui", game.CoreGui)
        local fr = Instance.new("Frame", sg)
        fr.Size = UDim2.new(0, 300, 0, 150)
        fr.Position = UDim2.new(0.5, -150, 0.3, 0)
        fr.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
        
        local txt = Instance.new("TextLabel", fr)
        txt.Size = UDim2.new(1,0,1,0)
        txt.BackgroundTransparency = 1
        txt.Text = "✅ ĐÃ TẢI MÃ NGUỒN!\n\n1. Đã lưu vào file 'TEDDY_SOURCE_FULL.txt'\n2. Đã Copy vào bộ nhớ tạm.\n\nRa ngoài Dán (Paste) ngay!"
        txt.TextColor3 = Color3.new(1,1,1)
        txt.TextSize = 16
        txt.TextWrapped = true
        txt.Font = Enum.Font.SourceSansBold
        
        local close = Instance.new("TextButton", fr)
        close.Size = UDim2.new(0, 30, 0, 30)
        close.Position = UDim2.new(1, -30, 0, 0)
        close.Text = "X"
        close.BackgroundColor3 = Color3.new(1,0,0)
        close.MouseButton1Click:Connect(function() sg:Destroy() end)
    else
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "LỖI",
            Text = "Link bị hỏng hoặc không truy cập được!",
            Duration = 5
        })
    end
end)
